<div class="experience-container">
    <h2 class="section-title">Work Experience</h2>

    <div *ngIf="loading" class="loading-container">
        <mat-spinner diameter="40"></mat-spinner>
        <p>Loading work experience...</p>
    </div>

    <div *ngIf="error" class="error-container">
        <p>Error loading work experience. Please try again later.</p>
    </div>

    <div *ngIf="!loading && !error" class="experience-timeline">
        <mat-card
            *ngFor="let experience of experiences; let last = last"
            class="experience-card"
        >
            <mat-card-header>
                <div mat-card-avatar class="experience-icon">
                    <mat-icon>work</mat-icon>
                </div>
                <mat-card-title>{{ experience.position }}</mat-card-title>
                <mat-card-subtitle>{{ experience.company }}</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
                <div class="experience-period">
                    {{ formatDate(experience.startDate) }} -
                    {{ formatDate(experience.endDate) }}
                    <span class="experience-duration">
                        ({{
                            calculateDuration(
                                experience.startDate,
                                experience.endDate
                            )
                        }})
                    </span>
                </div>
                <p
                    class="experience-description"
                    *ngIf="experience.description"
                >
                    {{ experience.description }}
                </p>
            </mat-card-content>
            <mat-divider *ngIf="!last"></mat-divider>
        </mat-card>

        <div *ngIf="experiences.length === 0" class="no-data">
            <p>No work experience available.</p>
        </div>
    </div>
</div>
